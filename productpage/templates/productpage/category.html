{% load  staticfiles %}
<head>
    <title> 제품 페이지 </title>
    <link  rel="stylesheet"  href="{% static 'productpage/index.css' %}" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>

<body>
  <h1>Product List</h1>
  <br/>

<!-- dictionary로 구현 -->
 <div class = "conv-filter__wrapper">
  {% for key, value in pb_stores.items %} 
    <a id = "conv-filter" href="/products/category/{{ct}}/{{ key }}">{{ value }}</a>  <!--view-->
  {% endfor %}
  <br/> 
 </div>

<div class = "filter__wrapper">
  {% for key, value in categories.items %} 
    <a id = "filter" href="/products/category/{{ key }}/{{pb}}">{{ value }}</a>  <!--view-->
  {% endfor %}
  <br/>

  <div style="margin-top: 30px;">
  {% for key, value in sub_categories.items %} 
    <a id = "sub-filter" href="/products/category/{{ key }}/{{ pb }}">{{ value }}</a>  <!--view-->
  {% endfor %}
  </div>
  <br/>
</div>

<div class ="product-list__wrapper">
  {% for product in products %}
    <div class="product-list">
      {% comment %} {% if user.is_authenticated %}
        <a href="/products/{{ product.id }}/save">        <!--view-->
          {% if product in user.products_saved.all %}
            <i class="material-icons">찜</i>        <!--material-icons-->
          {% else %}
            <i class="material-icons">노찜</i>
          {% endif %}
        </a>
      {% endif %}
      <a href="/products/{{ product.id }}">             <!--view-->
        <i class="material-icons">상세보기</i>
      </a>
      
      <br/>

      {% if product.photo %}
        <img src="{{ product.photo }}" width = "150" alt="">
      {% endif %}
      {% if product.PBstore%}
        <img src="{{ product.PBstore }}" width = "30" alt="">
      {% endif %}
      {% comment %} (임시)상품번호:{{ product.id }}
      <h4>상품명 : {{product.name}}</h2>
      <h4>가격 : {{product.price}}</h2>
      
      <h4><img src="{{ product.emoticon }}" width = "30" alt=""> {{product.rating}}</h2>  <!--choose emoticon--> {% endcomment %}

      {% if user.is_authenticated %}
        <a href="/products/{{ product.id }}/save">        <!--view-->
          {% if product in user.products_saved.all %}
            <img class = "bookmark" src = {% static 'bookmark_cancel.png'%} >
          {% else %}
            <img class = "bookmark" src = {% static 'bookmark.gif'%} style= "opacity:0.8" >
          {% endif %}
        </a>
      {% endif %}
   
      



        <div class = "table-wrap">
        <table>
          <tbody>
              <div class = "image-wrap">
                <div class = "pb-image">
                  {% if product.pb_store_code == '1' %}
                    <img id="pb-img" src="{% static 'cu.png' %}" width="100px"  alt="">
                  {% elif product.pb_store_code == '2' %}
                    <img id="pb-img" src="{% static 'gs25.gif' %}" width="100px" alt="">  
                  {% elif product.pb_store_code == '3' %}
                    <img id="pb-img" src="{% static '7eleven.jpeg' %}" width="100px" alt="">  
                  {% elif product.pb_store_code == '4' %}
                    <img id="pb-img" src="{% static 'emart24.png' %}" width="100px" alt="">  
                  {% elif product.pb_store_code == '5' %}
                    <img id="pb-img" src="{% static 'ministop.jpeg' %}" width="100px" alt="">  
                  {% endif %}
                </div>
                <div class='product-image'>
                  {% if product.photo %}
                    <a href="/products/{{ product.id }}"><img id ="product-img" src = {{ product.photo }}></a>
                  {% endif %}
                </div>
              </div> 
              <tr style = "font-size: 2.2vw;">
                  <th></th>
                  <td>{{product.name}}
                  </td>
              </tr>
              <tr style = "font-size: 2vw">
                  <th></th>
                  <td>{{product.price}}</td>
              </tr>
              <tr class = "rating">
                  <th></th>
                  <td style = "font-size: 2vw; font-weight: bold;">
                  <img src="{{ product.emoticon }}" width = "30" alt=""> 
                  {{product.rating}} 
                  </td>
              </tr>
          </tbody>
        </table>
      </div>

    </div>
  {% endfor %}
</div>
</body>